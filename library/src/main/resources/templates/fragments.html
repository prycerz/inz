<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>


<header th:fragment="navbar">
<nav class="navbar navbar-expand-lg navbar-light bg-light">
<a class="navbar-brand" th:href="@{/}">Biblioteka</a>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
<span class="navbar-toggler-icon">☰</span>
</button>


<div class="collapse navbar-collapse" id="navbarSupportedContent">
<ul class="navbar-nav mr-auto">
<li class="nav-item"><a class="nav-link" th:href="@{/}">Home</a></li>
<li class="nav-item"><a class="nav-link" th:href="@{/books}">Books</a></li>
<li class="nav-item"><a class="nav-link" th:href="@{/profile}">Profile</a></li>
<li class="nav-item"><a class="nav-link" th:href="@{/about}">About</a></li>
<li class="nav-item"><a class="nav-link" th:href="@{/contact}">Contact</a></li>
</ul>
<ul class="navbar-nav ml-auto">
<li class="nav-item"><a class="nav-link admin-link" th:href="@{/admin}">Admin</a></li>
<li class="nav-item"><a class="nav-link nav-link-login" th:href="@{/login}">LogIn</a></li>
</ul>

<script>
fetch('/api/session')
    .then(res => res.json())
    .then(json => {
        if(json.logged) {
            document.querySelectorAll('.nav-link-login').forEach(el => el.style.display = 'none');

            // pokaż Admin tylko jeśli role == "ADMIN"
            if(json.role !== 'ADMIN') {
                document.querySelectorAll('.admin-link').forEach(el => el.style.display = 'none');
            }
        } else {
            // jeśli nie zalogowany, też ukryj admin
            document.querySelectorAll('.admin-link').forEach(el => el.style.display = 'none');
        
        }
    });
</script>

</div>
</nav>
</header>


</body>
</html>